apiVersion: networking.gke.io/v1
kind: HealthCheckPolicy
metadata:
  name: backend-health-check
  namespace: cat-weight-tracker
spec:
  default:
    config:
      type: HTTP
      httpHealthCheck:
        portSpecification: USE_SERVING_PORT
        requestPath: /cats/
        port: 4000
  targetRef:
    group: ""
    kind: Service
    name: backend
---
apiVersion: networking.gke.io/v1
kind: HealthCheckPolicy
metadata:
  name: frontend-health-check
  namespace: cat-weight-tracker
spec:
  default:
    config:
      type: HTTP
      httpHealthCheck:
        portSpecification: USE_SERVING_PORT
        requestPath: /
        port: 80
  targetRef:
    group: ""
    kind: Service
    name: frontend